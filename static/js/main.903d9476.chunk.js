(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){e.exports=n(342)},340:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(9),l=n.n(r),c=n(25),o=n(30),u=n(32),s=n(31),d=n(33),m=n(34),p=n(73),h=n(35),f=n(36);function b(){var e=Object(h.a)(["\n  padding-top: 2em;\n  padding-left: 1em;\n"]);return b=function(){return e},e}var g=f.a.div(b()),E=(n(81),n(16)),j=(n(51),n(13)),v=(n(107),n(60)),O=(n(108),n(10)),y=(n(109),n(11));function C(){var e=Object(h.a)(["\n  padding-top: 1em;\n  padding-bottom: 1em;\n  border-bottom: 1px solid #eeeeee;\n"]);return C=function(){return e},e}function w(){var e=Object(h.a)(["\n  font-size: 2em;\n"]);return w=function(){return e},e}var k=f.a.div(w()),I=f.a.div(C()),x=n(12),L=new(n(145).GraphQLClient)("https://api.graph.cool/simple/v1/cjp4oi01mn6mq0198mt1o5fq1"),U=function(){return L.request("\n    {\n        allImages(orderBy: timestamp_DESC) {\n          id\n          title\n          imageData\n          timestamp\n        }\n      }\n  ")},D=new function e(){var t=this;Object(c.a)(this,e),this.addPic=function(e){(function(e){return L.request('\n    mutation {\n      createImage(\n        title: "'.concat(e.title,'"\n        imageData: "').concat(e.Image,'"\n        timestamp: "').concat(new Date,'"\n      ) {\n        id\n      }\n    }\n  '))})(e).then(function(e){U().then(function(e){t.data=e.allImages})})},this.deletePic=function(e){(function(e){return L.request('\n    mutation {\n      deleteImage(id: "'.concat(e,'") {\n        id\n      }\n    }\n  '))})(e).then(function(e){U().then(function(e){t.data=e.allImages})})},this.searchImage=function(e){var n=JSON.parse(localStorage.getItem("img_data")).filter(function(t){return""===e||t.title.toLowerCase().startsWith(e.toLowerCase())});t.data=t.sortPics(n)},this.sortPics=function(e){return e.slice().sort(function(e,t){return Date.parse(t.timestamp)-Date.parse(e.timestamp)})},Object(x.f)(this,{data:[]}),U().then(function(e){t.data=e.allImages})},P=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(I,null,i.a.createElement(E.a,{type:"flex",justify:"space-around",align:"middle"},i.a.createElement(y.a,{span:2},i.a.createElement(k,null,"PicShare")),i.a.createElement(y.a,{span:8},i.a.createElement(v.a,{placeholder:"Search",onChange:function(e){return D.searchImage(e.target.value)},prefix:i.a.createElement(O.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}})})),i.a.createElement(y.a,{span:8},i.a.createElement(E.a,null,i.a.createElement(y.a,{span:4},i.a.createElement(j.a,{size:"large",icon:"plus",onClick:this.props.showModal},"Upload Image"))))))}}]),t}(a.Component),q=(n(236),n(157)),M=(n(343),n(156)),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleUpload=function(){D.addPic({Image:n.url||n.file.result,title:n.title}),n.fileList=[],n.url="",n.title="",n.props.handleCancel()},n.actionFileUpload=function(e){return new Promise(function(t,a){var i=new FileReader;i.onload=function(){return t()},i.onerror=function(e){return a(e)},i.readAsDataURL(e),n.file=i,n.url=""})},Object(x.f)(Object(m.a)(Object(m.a)(n)),{url:"",title:"",file:"",fileList:[]}),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(q.a,{title:"Upload Image",visible:this.props.visible,onCancel:this.props.handleCancel,footer:[i.a.createElement(j.a,{key:"cancel",onClick:this.props.handleCancel},"Cancel"),i.a.createElement(j.a,{key:"upload",type:"primary",onClick:this.handleUpload},"Upload")]},i.a.createElement(E.a,{type:"flex",justify:"center",align:"middle"},i.a.createElement(y.a,{span:8},i.a.createElement(M.a,{fileList:this.fileList,onChange:function(t){t.file.status="done",t.file.error=null,e.fileList=[t.file]},action:this.actionFileUpload},i.a.createElement(j.a,null,i.a.createElement(O.a,{type:"upload"})," Click to Upload"))),i.a.createElement(y.a,{span:2},"OR"),i.a.createElement(y.a,{span:12},i.a.createElement(v.a,{type:"text",placeholder:"Enter URL of the image",value:this.url,onChange:function(t){e.url=t.target.value}}))),i.a.createElement(E.a,{type:"flex",justify:"center",align:"middle",style:{paddingTop:"1em"}},i.a.createElement(y.a,{span:22},i.a.createElement(v.a,{type:"text",placeholder:"Enter Title",value:this.title,onChange:function(t){e.title=t.target.value}}))))}}]),t}(a.Component),R=Object(p.a)(S),V=(n(344),n(105)),z=n(153),B=n.n(z);function F(){var e=Object(h.a)(["\n  background-image: ",";\n  background-size: 100%;\n  background-repeat: no-repeat;\n  background-position: center center;\n  border-bottom: 1px solid #eeeeee;\n  width: 27.84em;\n  height: 18em;\n"]);return F=function(){return e},e}function J(){var e=Object(h.a)(["\n  width: 30em;\n  display: inline-block;\n  padding: 1em;\n"]);return J=function(){return e},e}var W=f.a.div(J()),T=f.a.div(F(),function(e){return e.url||""}),_=V.a.Meta,A=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(W,null,i.a.createElement(V.a,{cover:i.a.createElement(T,{url:"url(".concat(this.props.pic.imageData,")")})},i.a.createElement(_,{title:i.a.createElement(E.a,{type:"flex",justify:"space-between"},this.props.pic.title,i.a.createElement(j.a,{shape:"circle",icon:"delete",type:"danger",onClick:this.props.onClick})),description:B()(this.props.pic.timestamp)})))}}]),t}(a.Component),G=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).showModal=function(){n.modalVisible=!0},n.handleCancel=function(e){n.modalVisible=!1},Object(x.f)(Object(m.a)(Object(m.a)(n)),{modalVisible:!1,search:""}),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(P,{showModal:this.showModal}),i.a.createElement(g,null,i.a.createElement(R,{visible:this.modalVisible,handleCancel:this.handleCancel,handleOk:this.handleOk}),D.data.map(function(e){return i.a.createElement(A,{key:e.id,pic:e,onClick:function(){D.deletePic(e.id)}})})))}}]),t}(a.Component),N=Object(p.a)(G),Q=function(){return i.a.createElement(N,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(340);l.a.render(i.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[161,2,1]]]);
//# sourceMappingURL=main.903d9476.chunk.js.map